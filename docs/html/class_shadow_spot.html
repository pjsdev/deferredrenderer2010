<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DeferredRenderer: ShadowSpot Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DeferredRenderer&#160;<span id="projectnumber">1.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_shadow_spot.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>ShadowSpot Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="ShadowSpot" --><!-- doxytag: inherits="SpotLight" -->
<p>a shadow casting spotlight  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for ShadowSpot:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_shadow_spot__inherit__graph.png" border="0" usemap="#_shadow_spot_inherit__map" alt="Inheritance graph"/></div>
<map name="_shadow_spot_inherit__map" id="_shadow_spot_inherit__map">
<area shape="rect" id="node2" href="class_spot_light.html" title="Spotlight for deferred lighting." alt="" coords="12,6,164,338"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for ShadowSpot:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_shadow_spot__coll__graph.png" border="0" usemap="#_shadow_spot_coll__map" alt="Collaboration graph"/></div>
<map name="_shadow_spot_coll__map" id="_shadow_spot_coll__map">
<area shape="rect" id="node2" href="class_spot_light.html" title="Spotlight for deferred lighting." alt="" coords="5,219,157,551"/><area shape="rect" id="node4" href="class_frustum.html" title="A generic frustum class that can be generated from any Projview, contains basic point and Bbox cullin..." alt="" coords="181,285,307,486"/><area shape="rect" id="node6" href="struct_frustum_1_1_plane.html" title="a basic structure for plane equation ax+by+cz+d = 0" alt="" coords="189,6,299,151"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_shadow_spot-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#abb1e451ec616e6a89fa5f05ce31c70ec">ShadowSpot</a> (const ngl::Vector &amp;_position, const ngl::Vector &amp;_target, const float &amp;_distance, const float &amp;_angle, const ngl::Vector &amp;_col, const ngl::Vector &amp;_up)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a436e8a0343061be95a5b7d41cd138f96">ShadowSpot</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a30481336d64427af9528cbb1e102352e">~ShadowSpot</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">dtor  <a href="#a30481336d64427af9528cbb1e102352e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#aa0efcf4a9899e0a969ee1b8e9ef52a63">getMapId</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">access the shadowmap id  <a href="#aa0efcf4a9899e0a969ee1b8e9ef52a63"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a57b8b2de5ebecac10ef116b33f6622b6">generateProjMatrices</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">construct the projection, inversprojection and projView matrices for this shadowspot  <a href="#a57b8b2de5ebecac10ef116b33f6622b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_frustum.html">Frustum</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#ae459d3a4dd961c56d92f99c3226ae5a9">getFrustum</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return the lights frustum  <a href="#ae459d3a4dd961c56d92f99c3226ae5a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const ngl::Matrix&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a86ed041ec74ab3b6273aef78db3a587e">getProjView</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return the light projview  <a href="#a86ed041ec74ab3b6273aef78db3a587e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const ngl::Matrix&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#ab9b25fb0cbf92d2863ff9a85a92bcd5a">getProj</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return the light projection matrix  <a href="#ab9b25fb0cbf92d2863ff9a85a92bcd5a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const ngl::Matrix&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a1b08642c25099e2c93d28f455a9958fe">getInverseProjView</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">return the inverse projview  <a href="#a1b08642c25099e2c93d28f455a9958fe"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ngl::Matrix&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#ab617833507648ec65fd4a4705ca4ead7">m_shadowView</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the shadowview matrix for shadow pass  <a href="#ab617833507648ec65fd4a4705ca4ead7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#ade3a597539f04158998e1340f22d4057">m_mapHandle</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">shadowmap handle  <a href="#ade3a597539f04158998e1340f22d4057"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_frustum.html">Frustum</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a01ab43cfe2880b0449ff51ed945499e7">m_frustum</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the lights frustum  <a href="#a01ab43cfe2880b0449ff51ed945499e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a46d99671b79bc3e5fe128d1e028aa4f2">m_angle</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the lights cone angle  <a href="#a46d99671b79bc3e5fe128d1e028aa4f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ngl::Matrix&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97">m_proj</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the lights proj matrix  <a href="#a160464d9551996804e83b08554f72d97"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ngl::Matrix&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#a8b3ffa683a76347d105f3cc2c904346b">m_projView</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the lights projview matrix  <a href="#a8b3ffa683a76347d105f3cc2c904346b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ngl::Matrix&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_shadow_spot.html#af66b2add536c872846cff52477a49281">m_invProjView</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the lights inverse projview matrix  <a href="#af66b2add536c872846cff52477a49281"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>a shadow casting spotlight </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00014">14</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abb1e451ec616e6a89fa5f05ce31c70ec"></a><!-- doxytag: member="ShadowSpot::ShadowSpot" ref="abb1e451ec616e6a89fa5f05ce31c70ec" args="(const ngl::Vector &amp;_position, const ngl::Vector &amp;_target, const float &amp;_distance, const float &amp;_angle, const ngl::Vector &amp;_col, const ngl::Vector &amp;_up)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ShadowSpot::ShadowSpot </td>
          <td>(</td>
          <td class="paramtype">const ngl::Vector &amp;&#160;</td>
          <td class="paramname"><em>_position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ngl::Vector &amp;&#160;</td>
          <td class="paramname"><em>_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float &amp;&#160;</td>
          <td class="paramname"><em>_distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float &amp;&#160;</td>
          <td class="paramname"><em>_angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ngl::Vector &amp;&#160;</td>
          <td class="paramname"><em>_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ngl::Vector &amp;&#160;</td>
          <td class="paramname"><em>_up</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_position</td><td>the light pos </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_target</td><td>the light lookat pos </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_distance</td><td>the reach of the light </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_angle</td><td>the cone angle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_col</td><td>the light colour </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_up</td><td>the apporximated up vector </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_shadow_spot_8cpp_source.html#l00008">8</a> of file <a class="el" href="_shadow_spot_8cpp_source.html">ShadowSpot.cpp</a>.</p>

<p>References <a class="el" href="_shadow_spot_8cpp_source.html#l00025">generateProjMatrices()</a>, <a class="el" href="_shadow_spot_8h_source.html#l00060">m_angle</a>, <a class="el" href="_spot_light_8h_source.html#l00061">SpotLight::m_matrixCam</a>, and <a class="el" href="_shadow_spot_8h_source.html#l00050">m_shadowView</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//m_shadowMapId = 0;</span>
    this-&gt;<span class="keyword">set</span>(_position,_target,_distance,_angle,_col,_up);
    <a class="code" href="class_shadow_spot.html#ab617833507648ec65fd4a4705ca4ead7" title="the shadowview matrix for shadow pass">m_shadowView</a> = <a class="code" href="class_spot_light.html#a7af20ec7ec23696be590e836adf0aed4" title="a temporary use of ngl camera for shadow matrices">m_matrixCam</a>.getModelView();<span class="comment">//Lookat(_position, _target, _up, true);</span>
    <a class="code" href="class_shadow_spot.html#a46d99671b79bc3e5fe128d1e028aa4f2" title="the lights cone angle">m_angle</a> = _angle;

    <a class="code" href="class_shadow_spot.html#a57b8b2de5ebecac10ef116b33f6622b6" title="construct the projection, inversprojection and projView matrices for this shadowspot">generateProjMatrices</a>();
}
</pre></div>
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_shadow_spot_abb1e451ec616e6a89fa5f05ce31c70ec_cgraph.png" border="0" usemap="#class_shadow_spot_abb1e451ec616e6a89fa5f05ce31c70ec_cgraph" alt=""/></div>
<map name="class_shadow_spot_abb1e451ec616e6a89fa5f05ce31c70ec_cgraph" id="class_shadow_spot_abb1e451ec616e6a89fa5f05ce31c70ec_cgraph">
<area shape="rect" id="node3" href="class_shadow_spot.html#a57b8b2de5ebecac10ef116b33f6622b6" title="construct the projection, inversprojection and projView matrices for this shadowspot" alt="" coords="229,5,456,35"/><area shape="rect" id="node5" href="class_frustum.html#abeca2d18ad72313d7fbef39c2cf037f0" title="method to generate the frustum from a projView matrix" alt="" coords="505,5,631,35"/><area shape="rect" id="node7" href="class_frustum.html#a3c514a0880e09ae6df9632dbbfd46543" title="build a plane" alt="" coords="681,5,817,35"/><area shape="rect" id="node9" href="class_frustum.html#a7c18fdcda4bd3684ac1ef9b7903ddb4d" title="normalise the plane" alt="" coords="868,5,1033,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a436e8a0343061be95a5b7d41cd138f96"></a><!-- doxytag: member="ShadowSpot::ShadowSpot" ref="a436e8a0343061be95a5b7d41cd138f96" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ShadowSpot::ShadowSpot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a30481336d64427af9528cbb1e102352e"></a><!-- doxytag: member="ShadowSpot::~ShadowSpot" ref="a30481336d64427af9528cbb1e102352e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ShadowSpot::~ShadowSpot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>dtor </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00029">29</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a57b8b2de5ebecac10ef116b33f6622b6"></a><!-- doxytag: member="ShadowSpot::generateProjMatrices" ref="a57b8b2de5ebecac10ef116b33f6622b6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ShadowSpot::generateProjMatrices </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>construct the projection, inversprojection and projView matrices for this shadowspot </p>
<p>Based on Jon Maceys code (2011) </p>

<p>Definition at line <a class="el" href="_shadow_spot_8cpp_source.html#l00025">25</a> of file <a class="el" href="_shadow_spot_8cpp_source.html">ShadowSpot.cpp</a>.</p>

<p>References <a class="el" href="_frustum_8cpp_source.html#l00014">Frustum::generate()</a>, <a class="el" href="_shadow_spot_8h_source.html#l00060">m_angle</a>, <a class="el" href="_shadow_spot_8h_source.html#l00057">m_frustum</a>, <a class="el" href="_spot_light_8h_source.html#l00064">SpotLight::m_lightView</a>, <a class="el" href="_shadow_spot_8h_source.html#l00063">m_proj</a>, and <a class="el" href="_shadow_spot_8h_source.html#l00066">m_projView</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">float</span> aspectRatio = float(1024/768);

    <span class="keywordtype">float</span> near = 0.1;
    <span class="keywordtype">float</span> far = 300.0;

    <span class="comment">// note 1/tan == cotangent</span>
    <span class="keywordtype">float</span> f= 1.0/tan(ngl::radians(<a class="code" href="class_shadow_spot.html#a46d99671b79bc3e5fe128d1e028aa4f2" title="the lights cone angle">m_angle</a>)/2.0);

    <a class="code" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97" title="the lights proj matrix">m_proj</a>.identity();

    <a class="code" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97" title="the lights proj matrix">m_proj</a>.m_m[0][0]=f/aspectRatio;
    <a class="code" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97" title="the lights proj matrix">m_proj</a>.m_m[1][1]=f;

    <a class="code" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97" title="the lights proj matrix">m_proj</a>.m_m[2][2]=(far+near)/(near-far);
    <a class="code" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97" title="the lights proj matrix">m_proj</a>.m_m[3][2]=(2*far*near)/(near-far);

    <a class="code" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97" title="the lights proj matrix">m_proj</a>.m_m[2][3]=-1;

    <a class="code" href="class_shadow_spot.html#a8b3ffa683a76347d105f3cc2c904346b" title="the lights projview matrix">m_projView</a> = <a class="code" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97" title="the lights proj matrix">m_proj</a> * <a class="code" href="class_spot_light.html#a1d30209b6eab59778828213fae061bcd" title="the lights view matrix">m_lightView</a>;
    <a class="code" href="class_shadow_spot.html#a01ab43cfe2880b0449ff51ed945499e7" title="the lights frustum">m_frustum</a>.<a class="code" href="class_frustum.html#abeca2d18ad72313d7fbef39c2cf037f0" title="method to generate the frustum from a projView matrix">generate</a>(<a class="code" href="class_shadow_spot.html#a8b3ffa683a76347d105f3cc2c904346b" title="the lights projview matrix">m_projView</a>);
}
</pre></div>
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_shadow_spot_a57b8b2de5ebecac10ef116b33f6622b6_cgraph.png" border="0" usemap="#class_shadow_spot_a57b8b2de5ebecac10ef116b33f6622b6_cgraph" alt=""/></div>
<map name="class_shadow_spot_a57b8b2de5ebecac10ef116b33f6622b6_cgraph" id="class_shadow_spot_a57b8b2de5ebecac10ef116b33f6622b6_cgraph">
<area shape="rect" id="node3" href="class_frustum.html#abeca2d18ad72313d7fbef39c2cf037f0" title="method to generate the frustum from a projView matrix" alt="" coords="281,5,407,35"/><area shape="rect" id="node5" href="class_frustum.html#a3c514a0880e09ae6df9632dbbfd46543" title="build a plane" alt="" coords="457,5,593,35"/><area shape="rect" id="node7" href="class_frustum.html#a7c18fdcda4bd3684ac1ef9b7903ddb4d" title="normalise the plane" alt="" coords="644,5,809,35"/></map>
</div>
</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_shadow_spot_a57b8b2de5ebecac10ef116b33f6622b6_icgraph.png" border="0" usemap="#class_shadow_spot_a57b8b2de5ebecac10ef116b33f6622b6_icgraph" alt=""/></div>
<map name="class_shadow_spot_a57b8b2de5ebecac10ef116b33f6622b6_icgraph" id="class_shadow_spot_a57b8b2de5ebecac10ef116b33f6622b6_icgraph">
<area shape="rect" id="node3" href="class_shadow_spot.html#abb1e451ec616e6a89fa5f05ce31c70ec" title="ShadowSpot::ShadowSpot" alt="" coords="280,5,456,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae459d3a4dd961c56d92f99c3226ae5a9"></a><!-- doxytag: member="ShadowSpot::getFrustum" ref="ae459d3a4dd961c56d92f99c3226ae5a9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_frustum.html">Frustum</a> ShadowSpot::getFrustum </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return the lights frustum </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00038">38</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

<p>References <a class="el" href="_shadow_spot_8h_source.html#l00057">m_frustum</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> <a class="code" href="class_shadow_spot.html#a01ab43cfe2880b0449ff51ed945499e7" title="the lights frustum">m_frustum</a>;}<span class="keyword">const</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a1b08642c25099e2c93d28f455a9958fe"></a><!-- doxytag: member="ShadowSpot::getInverseProjView" ref="a1b08642c25099e2c93d28f455a9958fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ngl::Matrix ShadowSpot::getInverseProjView </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return the inverse projview </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00047">47</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

<p>References <a class="el" href="_shadow_spot_8h_source.html#l00069">m_invProjView</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> <a class="code" href="class_shadow_spot.html#af66b2add536c872846cff52477a49281" title="the lights inverse projview matrix">m_invProjView</a>;}
</pre></div>
</div>
</div>
<a class="anchor" id="aa0efcf4a9899e0a969ee1b8e9ef52a63"></a><!-- doxytag: member="ShadowSpot::getMapId" ref="aa0efcf4a9899e0a969ee1b8e9ef52a63" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ShadowSpot::getMapId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>access the shadowmap id </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00032">32</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

<p>References <a class="el" href="_shadow_spot_8h_source.html#l00053">m_mapHandle</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> <a class="code" href="class_shadow_spot.html#ade3a597539f04158998e1340f22d4057" title="shadowmap handle">m_mapHandle</a>;}
</pre></div>
</div>
</div>
<a class="anchor" id="ab9b25fb0cbf92d2863ff9a85a92bcd5a"></a><!-- doxytag: member="ShadowSpot::getProj" ref="ab9b25fb0cbf92d2863ff9a85a92bcd5a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ngl::Matrix ShadowSpot::getProj </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return the light projection matrix </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00044">44</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

<p>References <a class="el" href="_shadow_spot_8h_source.html#l00063">m_proj</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> <a class="code" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97" title="the lights proj matrix">m_proj</a>;}<span class="keyword">const</span>
</pre></div>
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_shadow_spot_ab9b25fb0cbf92d2863ff9a85a92bcd5a_icgraph.png" border="0" usemap="#class_shadow_spot_ab9b25fb0cbf92d2863ff9a85a92bcd5a_icgraph" alt=""/></div>
<map name="class_shadow_spot_ab9b25fb0cbf92d2863ff9a85a92bcd5a_icgraph" id="class_shadow_spot_ab9b25fb0cbf92d2863ff9a85a92bcd5a_icgraph">
<area shape="rect" id="node3" href="class_g_l_window.html#a9bd2503dd5f812c10a9481f22ecd3403" title="this is the main gl drawing routine" alt="" coords="212,5,348,35"/><area shape="rect" id="node5" href="class_g_l_window.html#a0f7d182189c32d342f7fa2fe86a41946" title="shadow pass for our shadowspot" alt="" coords="199,58,361,89"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a86ed041ec74ab3b6273aef78db3a587e"></a><!-- doxytag: member="ShadowSpot::getProjView" ref="a86ed041ec74ab3b6273aef78db3a587e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ngl::Matrix ShadowSpot::getProjView </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>return the light projview </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00041">41</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

<p>References <a class="el" href="_shadow_spot_8h_source.html#l00066">m_projView</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> <a class="code" href="class_shadow_spot.html#a8b3ffa683a76347d105f3cc2c904346b" title="the lights projview matrix">m_projView</a>;}<span class="keyword">const</span>
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a46d99671b79bc3e5fe128d1e028aa4f2"></a><!-- doxytag: member="ShadowSpot::m_angle" ref="a46d99671b79bc3e5fe128d1e028aa4f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="class_shadow_spot.html#a46d99671b79bc3e5fe128d1e028aa4f2">ShadowSpot::m_angle</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the lights cone angle </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00060">60</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

</div>
</div>
<a class="anchor" id="a01ab43cfe2880b0449ff51ed945499e7"></a><!-- doxytag: member="ShadowSpot::m_frustum" ref="a01ab43cfe2880b0449ff51ed945499e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_frustum.html">Frustum</a> <a class="el" href="class_shadow_spot.html#a01ab43cfe2880b0449ff51ed945499e7">ShadowSpot::m_frustum</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the lights frustum </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00057">57</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

</div>
</div>
<a class="anchor" id="af66b2add536c872846cff52477a49281"></a><!-- doxytag: member="ShadowSpot::m_invProjView" ref="af66b2add536c872846cff52477a49281" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ngl::Matrix <a class="el" href="class_shadow_spot.html#af66b2add536c872846cff52477a49281">ShadowSpot::m_invProjView</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the lights inverse projview matrix </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00069">69</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

</div>
</div>
<a class="anchor" id="ade3a597539f04158998e1340f22d4057"></a><!-- doxytag: member="ShadowSpot::m_mapHandle" ref="ade3a597539f04158998e1340f22d4057" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_shadow_spot.html#ade3a597539f04158998e1340f22d4057">ShadowSpot::m_mapHandle</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>shadowmap handle </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00053">53</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

</div>
</div>
<a class="anchor" id="a160464d9551996804e83b08554f72d97"></a><!-- doxytag: member="ShadowSpot::m_proj" ref="a160464d9551996804e83b08554f72d97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ngl::Matrix <a class="el" href="class_shadow_spot.html#a160464d9551996804e83b08554f72d97">ShadowSpot::m_proj</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the lights proj matrix </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00063">63</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8b3ffa683a76347d105f3cc2c904346b"></a><!-- doxytag: member="ShadowSpot::m_projView" ref="a8b3ffa683a76347d105f3cc2c904346b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ngl::Matrix <a class="el" href="class_shadow_spot.html#a8b3ffa683a76347d105f3cc2c904346b">ShadowSpot::m_projView</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the lights projview matrix </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00066">66</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab617833507648ec65fd4a4705ca4ead7"></a><!-- doxytag: member="ShadowSpot::m_shadowView" ref="ab617833507648ec65fd4a4705ca4ead7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ngl::Matrix <a class="el" href="class_shadow_spot.html#ab617833507648ec65fd4a4705ca4ead7">ShadowSpot::m_shadowView</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the shadowview matrix for shadow pass </p>

<p>Definition at line <a class="el" href="_shadow_spot_8h_source.html#l00050">50</a> of file <a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_shadow_spot_8h_source.html">ShadowSpot.h</a></li>
<li><a class="el" href="_shadow_spot_8cpp_source.html">ShadowSpot.cpp</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_shadow_spot.html">ShadowSpot</a>      </li>
      <li class="footer">Generated on Tue Jul 26 2011 20:53:10 for DeferredRenderer by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
